{% extends "sacrud/redefineme.jinja2" %}

{% block extra_css %}{% endblock %}

{% block sa_body %}
    <div class="dashboard">
        <div class="dashboard-title">{{ _ps('Dashboard') }}</div>
        <div class="dashboard__inner clear-fix">
            {% for widget in widgets %}
                {% if widget.position % dashboard_columns == 1 %}
                    {% if not loop.first %}
                        </div>
                    {% endif %}
                    <div class="dashboard__column sortable"
                         data-number="{{widget.position}}">
                {% endif %}

                {% if widget.tables|length > 0 %}
                    <div class="widget widget_type_drag" name="{{ widget.name }}">
                        <div class="widget-title">
                            {{ _(widget.name) }}
                            <span class="widget-title_state_switch k-icon k-i-arrowhead-n">
                            </span>
                        </div>
                        <div class="widget-content">
                            {% for table in widget.tables %}
                                <div class="widget-row">
                                    {% set tname = table.__tablename__ %}
                                    <div class="widget-row__item">
                                        <a href="{{ request.route_url('sa_list', table=tname) }}" class="widget-row__item-link" id="id_{{ tname }}" >{{ _(table.verbose_name or tname) }}</a>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}

                {% if loop.last %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block extrascript %}
    <!--
        <script type="text/javascript">
            requirejs(["app/dashboard"]);
        </script>
    -->
{% endblock %}
